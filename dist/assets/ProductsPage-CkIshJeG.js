import{e as C,r as d,j as e,D as j,R,I as f,B as u,u as L,a as q,f as I,a2 as O,a3 as E,a4 as A,a5 as T}from"./index-BAkzQYrJ.js";const H=C("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]),B=C("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),F=C("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),$=C("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),S=d.forwardRef(({className:a,...i},t)=>e.jsx("div",{ref:t,className:j("rounded-lg border bg-card text-card-foreground shadow-sm",a),...i}));S.displayName="Card";const D=d.forwardRef(({className:a,...i},t)=>e.jsx("div",{ref:t,className:j("flex flex-col space-y-1.5 p-6",a),...i}));D.displayName="CardHeader";const U=d.forwardRef(({className:a,...i},t)=>e.jsx("h3",{ref:t,className:j("text-2xl font-semibold leading-none tracking-tight",a),...i}));U.displayName="CardTitle";const _=d.forwardRef(({className:a,...i},t)=>e.jsx("p",{ref:t,className:j("text-sm text-muted-foreground",a),...i}));_.displayName="CardDescription";const P=d.forwardRef(({className:a,...i},t)=>e.jsx("div",{ref:t,className:j("p-6 pt-0",a),...i}));P.displayName="CardContent";const G=d.forwardRef(({className:a,...i},t)=>e.jsx("div",{ref:t,className:j("flex items-center p-6 pt-0",a),...i}));G.displayName="CardFooter";function J({open:a,onOpenChange:i,children:t}){return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-lg rounded-2xl bg-background p-6 shadow-lg border border-border",children:[t,e.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 text-muted-foreground hover:text-foreground",children:"✕"})]})}):null}function Q({children:a}){return e.jsx("div",{className:"relative",children:a})}function V({children:a}){return e.jsx("div",{className:"mb-4",children:a})}function Y({children:a}){return e.jsx("h2",{className:"text-lg font-bold",children:a})}const M=R.forwardRef(({className:a="",...i},t)=>e.jsx("textarea",{ref:t,className:`w-full p-3 rounded-xl border border-white/10 bg-white/10 text-white/90 placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20 ${a}`,...i}));M.displayName="Textarea";function Z({open:a,onClose:i,product:t,onSubmit:y,loading:h}){const[n,o]=d.useState({name:"",description:"",price:"",category:"",images:[],sizes:[]}),[b,v]=d.useState(null);d.useEffect(()=>{o(t?{name:t.name||"",description:t.description||"",price:t.price||"",category:t.category||"",images:[],sizes:t.sizes||[]}:{name:"",description:"",price:"",category:"",images:[],sizes:[]})},[t]);const m=l=>{const{name:s,value:c,files:p}=l.target;o(p?x=>({...x,images:[...x.images,...Array.from(p)]}):x=>({...x,[s]:c}))},g=(l,s,c)=>{const p=[...n.sizes];p[l][s]=c,o(x=>({...x,sizes:p}))},N=()=>{o(l=>({...l,sizes:[...l.sizes,{size:"",quantity:0}]}))},w=l=>{const s=[...n.sizes];s.splice(l,1),o(c=>({...c,sizes:s}))},k=l=>v(l),r=(l,s)=>{if(l.preventDefault(),b===s)return;const c=[...n.images],p=c[b];c.splice(b,1),c.splice(s,0,p),v(s),o(x=>({...x,images:c}))},z=l=>{l.preventDefault();const s=new FormData;s.append("name",n.name.trim()),s.append("description",n.description.trim()),s.append("price",n.price),s.append("category",n.category),n.images.forEach(c=>{s.append("images",c)}),s.append("sizes",JSON.stringify(n.sizes)),y(s)};return e.jsx(J,{open:a,onOpenChange:l=>!l&&i(),children:e.jsxs(Q,{className:"sm:max-w-lg rounded-2xl bg-background/80 backdrop-blur-xl border border-border shadow-xl",children:[e.jsx(V,{children:e.jsx(Y,{className:"text-xl font-bold",children:t?"Edit Product":"Add Product"})}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsx(f,{name:"name",placeholder:"Product name",value:n.name,onChange:m,required:!0}),e.jsx(M,{name:"description",placeholder:"Description",value:n.description,onChange:m,rows:3}),e.jsx(f,{type:"number",name:"price",placeholder:"Price",value:n.price,onChange:m,required:!0}),e.jsxs("select",{name:"category",value:n.category,onChange:m,required:!0,className:"w-full rounded border p-2 bg-background",children:[e.jsx("option",{value:"",children:"-- Select Category --"}),e.jsx("option",{value:"Outerwear",children:"T-Shirt"}),e.jsx("option",{value:"Hoodie",children:"Hoodie"}),e.jsx("option",{value:"pants",children:"Pants"})]}),e.jsx(f,{type:"file",name:"images",accept:"image/*",multiple:!0,onChange:m}),n.images.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.images.map((l,s)=>e.jsxs("div",{draggable:!0,onDragStart:()=>k(s),onDragOver:c=>r(c,s),className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(l),alt:`preview-${s}`,className:`w-20 h-20 object-cover rounded border ${s===0?"ring-2 ring-blue-500":""}`}),s===0&&e.jsx("span",{className:"absolute top-1 left-1 bg-blue-500 text-white text-xs px-1 rounded",children:"Main"})]},s))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold",children:"Sizes"}),e.jsx(u,{type:"button",size:"sm",variant:"outline",onClick:N,children:"Add Size"})]}),n.sizes.map((l,s)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(f,{type:"text",placeholder:"Size (e.g. S, M, L)",value:l.size,onChange:c=>g(s,"size",c.target.value)}),e.jsx(f,{type:"number",placeholder:"Quantity",value:l.quantity,onChange:c=>g(s,"quantity",c.target.value)}),e.jsx(u,{type:"button",variant:"destructive",size:"sm",onClick:()=>w(s),children:"✕"})]},s))]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{variant:"outline",type:"button",onClick:i,children:"Cancel"}),e.jsx(u,{type:"submit",disabled:h,className:"btn-accent",children:h?"Saving...":t?"Update":"Create"})]})]})]})})}function W(){const a=L(),{items:i,status:t,error:y}=q(r=>r.products),[h,n]=d.useState("grid"),[o,b]=d.useState(""),[v,m]=d.useState(!1),[g,N]=d.useState(null);d.useEffect(()=>{a(I())},[a]);const w=i.filter(r=>r.name.toLowerCase().includes(o.toLowerCase())),k=r=>{window.confirm("Yakin hapus produk ini?")&&a(T(r))};return e.jsxs("div",{className:"relative min-h-screen w-full bg-background/80 backdrop-blur-xl p-6",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-[400px] h-[400px] bg-accent/20 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute -bottom-32 -right-24 w-[500px] h-[500px] bg-success/20 rounded-full blur-3xl animate-pulse"})]}),e.jsxs("div",{className:"sticky top-0 z-20 mb-6 flex flex-col gap-3 rounded-2xl bg-background/60 p-4 backdrop-blur-md shadow-sm border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-foreground",children:"Product Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:h==="grid"?"default":"outline",size:"icon",onClick:()=>n("grid"),children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx(u,{variant:h==="list"?"default":"outline",size:"icon",onClick:()=>n("list"),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsxs(u,{onClick:()=>{N(null),m(!0)},className:"btn-accent flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4"})," Add"]})]})]}),e.jsx(f,{placeholder:"Cari produk...",value:o,onChange:r=>b(r.target.value),className:"w-full md:w-72"})]}),t==="loading"?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(O,{className:"h-10 w-10 animate-spin text-accent"})}):y?e.jsx("p",{className:"text-center text-destructive",children:y}):w.length===0?e.jsx("p",{className:"text-center text-muted-foreground",children:"No products found."}):e.jsx("div",{className:`grid gap-4 ${h==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:w.map(r=>e.jsxs(S,{className:"group relative rounded-2xl border border-border bg-card/60 backdrop-blur-xl shadow-md hover:shadow-xl transition",children:[e.jsx(D,{className:"p-0",children:e.jsx("div",{className:"relative h-40 overflow-hidden rounded-t-2xl",children:r.images&&r.images.length>0?e.jsx("img",{src:r.images[0].url,alt:r.images[0].alt||r.name,className:"h-full w-full object-cover"}):e.jsx("img",{src:"/placeholder.png",alt:"No Image",className:"h-full w-full object-cover"})})}),e.jsxs(P,{className:"p-4 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(H,{variant:"success",children:["Rp ",r.price]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{N(r),m(!0)},children:"Edit"}),e.jsx(u,{size:"sm",variant:"destructive",onClick:()=>k(r._id),children:"Delete"})]})]})]})]},r._id))}),v&&e.jsx(Z,{open:v,onClose:()=>m(!1),product:g,loading:t==="loading",onSubmit:async r=>{try{g?await a(E({id:g._id,productData:r})).unwrap():await a(A(r)).unwrap(),m(!1)}catch(z){console.error("Save failed:",z)}}})]})}export{W as default};
