import{a as N,r as i,j as e,m as t,S as w,d as S,o as k,c as h,A as g,O as z}from"./index-BAkzQYrJ.js";import{M as C,C as R}from"./message-square-DRbGPMqQ.js";const E=a=>a?a.replace(/(<([^>]+)>)/gi,"").replace(/(https?:\/\/[^\s]+)/gi,"").replace(/javascript:/gi,"").replace(/data:/gi,"").replace(/vbscript:/gi,"").replace(/on\w+=/gi,"").replace(/script/gi,"").slice(0,500):"",b=({className:a,delay:o=0})=>e.jsx(t.div,{initial:{scale:0,rotate:0},animate:{scale:[1,1.2,.8,1],rotate:[0,90,180,360],x:[0,20,-15,0],y:[0,-10,15,0]},transition:{duration:20,repeat:1/0,delay:o,ease:"easeInOut"},className:`absolute rounded-full blur-xl opacity-30 ${a}`}),I=({rating:a,setRating:o,isMobile:m})=>{const[l,n]=i.useState(0);return e.jsx("div",{className:"flex gap-1 sm:gap-2",children:[1,2,3,4,5].map(s=>e.jsx(t.button,{whileHover:{scale:1.15,rotateZ:5},whileTap:{scale:.85},transition:{duration:.32,ease:"easeOut"},type:"button",onMouseEnter:()=>n(s),onMouseLeave:()=>n(0),onClick:()=>o(s),className:"focus:outline-none focus:ring-2 focus:ring-accent/50 rounded-full p-1",children:e.jsx(h,{size:m?24:28,className:`cursor-pointer transition-all duration-320 ${s<=(l||a)?"text-secondary fill-secondary drop-shadow-sm filter brightness-110":"text-muted-foreground hover:text-secondary/60"}`})},s))})},O=({products:a,value:o,onChange:m,isMobile:l})=>{const[n,s]=i.useState(!1),x=a.find(r=>r._id===o);return e.jsxs("div",{className:"relative",children:[e.jsxs(t.button,{whileTap:{scale:.98},type:"button",onClick:()=>s(!n),className:"w-full p-3 sm:p-4 rounded-2xl bg-card/80 backdrop-blur-xl border border-border/60 text-foreground text-left flex items-center justify-between group hover:border-accent/40 hover:bg-card/90 transition-all duration-320 focus:outline-none focus:ring-2 focus:ring-accent/50",children:[e.jsx("span",{className:l?"text-sm truncate pr-2":"",children:x?.name}),e.jsx(t.div,{animate:{rotateZ:n?180:0},transition:{duration:.32},children:e.jsx(R,{size:18,className:"text-muted-foreground group-hover:text-accent transition-colors duration-320"})})]}),e.jsx(g,{children:n&&e.jsx(t.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.32,ease:"easeOut"},className:"absolute top-full left-0 right-0 mt-2 bg-card/95 backdrop-blur-xl border border-border/60 rounded-2xl overflow-hidden shadow-2xl z-50",children:a.map((r,p)=>e.jsx(t.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:p*.05},type:"button",onClick:()=>{m(r._id),s(!1)},className:`w-full p-3 sm:p-4 text-left hover:bg-accent/10 transition-colors duration-320 ${l?"text-sm":""} ${o===r._id?"bg-accent/20 text-accent":"text-foreground"}`,children:r.name},r._id))})})]})},L=({products:a=[],onSubmit:o})=>{const{user:m}=N(d=>d.auth),[l,n]=i.useState(a?.[0]?._id||""),[s,x]=i.useState(0),[r,p]=i.useState(""),[f,M]=i.useState(!1),[u,v]=i.useState(!1),y=i.useRef(null);i.useEffect(()=>{const d=()=>v(window.innerWidth<768);return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const j={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut",staggerChildren:.1}}},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return e.jsxs(t.div,{ref:y,variants:j,initial:"hidden",animate:"visible",className:"relative w-full max-w-2xl mx-auto",children:[e.jsx(b,{className:"w-32 h-32 bg-gradient-to-r from-accent to-secondary top-4 right-4",delay:0}),e.jsx(b,{className:"w-24 h-24 bg-gradient-to-r from-secondary to-success bottom-8 left-2",delay:2}),e.jsx(b,{className:"w-20 h-20 bg-gradient-to-r from-info to-warning top-1/2 right-8",delay:4}),e.jsxs(t.div,{variants:c,className:"relative glass-card p-6 sm:p-8 lg:p-10 shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-card/60 via-card/40 to-transparent backdrop-blur-xl"}),e.jsxs("div",{className:"relative space-y-6 sm:space-y-8",children:[e.jsxs(t.div,{variants:c,className:"text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 mb-2",children:[e.jsx(t.div,{animate:{rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"p-2 bg-gradient-to-r from-accent to-secondary rounded-xl",children:e.jsx(C,{size:u?20:24,className:"text-white"})}),e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-heading font-bold bg-gradient-to-r from-foreground via-secondary to-accent bg-clip-text text-transparent",children:"Share Your Experience"})]}),e.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm flex items-center justify-center sm:justify-start gap-1",children:[e.jsx(w,{size:14,className:"text-secondary"}),"Help others discover quality"]})]}),e.jsxs("div",{className:"space-y-5 sm:space-y-6",children:[e.jsxs(t.div,{variants:c,children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(S,{size:14,className:"text-success"}),"Verified User"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:m?.name||"Guest User",readOnly:!0,className:"w-full p-3 sm:p-4 rounded-2xl bg-card/60 backdrop-blur-xl border border-success/30 text-foreground cursor-not-allowed select-none text-sm sm:text-base"}),e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-success rounded-full animate-pulse"})})]})]}),e.jsxs(t.div,{variants:c,children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-muted-foreground mb-2 flex items-center gap-2",children:[e.jsx(k,{size:14,className:"text-accent"}),"Select Product"]}),e.jsx(O,{products:a,value:l,onChange:n,isMobile:u})]}),e.jsxs(t.div,{variants:c,children:[e.jsxs("label",{className:"block text-xs sm:text-sm font-medium text-muted-foreground mb-3 flex items-center gap-2",children:[e.jsx(h,{size:14,className:"text-secondary"}),"Rate Your Experience"]}),e.jsx("div",{className:"flex justify-center sm:justify-start",children:e.jsx(I,{rating:s,setRating:x,isMobile:u})}),s>0&&e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-center sm:text-left mt-2 text-muted-foreground",children:s===5?"Excellent!":s>=4?"Great!":s>=3?"Good":"Could be better"})]}),e.jsxs(t.div,{variants:c,children:[e.jsx("label",{className:"block text-xs sm:text-sm font-medium text-muted-foreground mb-2",children:"Your Review"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{rows:u?3:4,placeholder:"Share what you loved about this product...",value:r,onChange:d=>p(E(d.target.value)),className:"w-full p-3 sm:p-4 rounded-2xl bg-card/60 backdrop-blur-xl border border-border/60 text-foreground placeholder-muted-foreground resize-none focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent/40 hover:border-secondary/40 transition-all duration-320 text-sm sm:text-base",required:!0,maxLength:500}),e.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[r.length,"/500"]})]})]}),e.jsx(t.div,{variants:c,whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(t.button,{type:"submit",disabled:!l||s===0||!r.trim()||f,className:"w-full py-3 sm:py-4 text-sm sm:text-base font-semibold rounded-2xl btn-primary hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-320 flex items-center justify-center gap-2 shadow-lg",children:e.jsx(g,{mode:"wait",children:f?e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting..."]}):e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center gap-2",children:[e.jsx(z,{size:16}),"Submit Review"]})})})})]})]})]})]})};export{L as default};
