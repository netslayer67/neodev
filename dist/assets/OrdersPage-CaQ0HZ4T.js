import{o as J,j as e,A as M,m as i,B as k,X as L,P as F,U as K,u as Y,h as Z,a as ee,r as c,a6 as A,I as se,a7 as te,a8 as ae,a9 as re,aa as ie,ab as ne}from"./index-prnh0kJO.js";import{T as oe,a as le,b as T,c as g,d as ce,e as h,D as de,f as me,M as ue,g as xe,h as j}from"./dropdown-menu-B0kjxz_8.js";import{P as S}from"./package-I5PBfAKd.js";import{C as he}from"./credit-card-Bul8xivK.js";import{l as pe,F as ge,D as fe}from"./index-BR481z1j.js";import{U as be}from"./users-NoBN2ElT.js";import{T as R}from"./trending-up-iG8kwfSS.js";import{S as je}from"./search-Cx9c56G7.js";import{E as ye}from"./eye-GbwtL3Bc.js";import{C as D}from"./check-circle-BuVzsy5i.js";import{T as $}from"./truck-DyDmy6Es.js";import{A as ve}from"./alert-circle-pXYVWN08.js";import{C as Ne}from"./clock-B6wggCtW.js";import"./chevron-right-BgSPLwzK.js";import"./check-C6tV4m32.js";import"./circle-D7M3hE65.js";const we=J("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),y=({label:a,value:t})=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50 transition-colors duration-300",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:a}),e.jsx("span",{className:"text-sm font-semibold text-foreground",children:t})]}),Ce=({isOpen:a,order:t,status:r,onClose:o})=>{if(!a)return null;const d=t?.items?.reduce((l,f)=>l+f.price*f.quantity,0)||0;return e.jsx(M,{children:e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-overlay backdrop-blur-glass flex items-center justify-center p-4",onClick:o,children:[e.jsx(i.div,{className:"absolute -top-24 -left-20 w-72 h-72 bg-accent/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1]},transition:{duration:8,repeat:1/0}}),e.jsx(i.div,{className:"absolute bottom-[-100px] right-[-100px] w-80 h-80 bg-secondary/30 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2]},transition:{duration:10,repeat:1/0}}),e.jsxs(i.div,{initial:{scale:.95,y:40,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:40,opacity:0},transition:{duration:.32,ease:"easeOut"},onClick:l=>l.stopPropagation(),className:"relative w-full max-w-3xl liquid-glass-card overflow-hidden",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:o,className:"absolute top-4 right-4 z-10 text-muted-foreground hover:text-error transition-colors duration-300",children:e.jsx(L,{size:22})}),e.jsx("div",{className:"p-6 sm:p-10",children:r==="loading"||!t?e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsx(F,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-heading tracking-wide drop-shadow-sm",children:"Order Overview"}),e.jsxs("p",{className:"text-sm font-mono text-text-subtle",children:["#",t.orderId]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-4 hover:shadow-glass transition duration-300",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-accent",children:[e.jsx(K,{size:18})," Client"]}),e.jsxs("div",{className:"pl-3 border-l-2 border-accent/50 space-y-1 text-sm",children:[e.jsx("p",{children:t.user?.name}),e.jsx("p",{className:"text-muted-foreground",children:t.user?.email})]})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glass transition duration-300",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-accent",children:[e.jsx(we,{size:18})," Shipping"]}),e.jsxs("div",{className:"pl-3 border-l-2 border-accent/50 space-y-1 text-sm",children:[e.jsx("p",{children:t.shippingAddress?.street}),e.jsxs("p",{className:"text-muted-foreground",children:[t.shippingAddress?.city,", ",t.shippingAddress?.postalCode]}),e.jsx("p",{className:"text-muted-foreground",children:t.shippingAddress?.country}),e.jsxs("p",{className:"text-muted-foreground",children:["Phone: ",t.shippingAddress?.phone]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"glass-card p-4 hover:shadow-glass transition duration-300",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-accent",children:[e.jsx(S,{size:18})," Items"]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto pr-1 scrollbar-hide",children:t.items.map(l=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"font-medium text-foreground",children:l.name}),e.jsxs("p",{className:"text-muted-foreground",children:["Qty: ",l.quantity]})]}),e.jsxs("p",{className:"font-mono whitespace-nowrap",children:["Rp ",(l.price*l.quantity).toLocaleString("id-ID")]})]},l.product))})]}),e.jsxs("div",{className:"glass-card p-4 hover:shadow-glass transition duration-300",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-accent",children:[e.jsx(he,{size:18})," Payment"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{label:"Subtotal",value:`Rp ${d.toLocaleString("id-ID")}`}),t.shippingPrice&&e.jsx(y,{label:"Shipping",value:`Rp ${t.shippingPrice.toLocaleString("id-ID")}`}),e.jsx(y,{label:"Method",value:t.paymentMethod||"N/A"}),e.jsx("div",{className:"pt-2 mt-2 border-t border-border/50",children:e.jsx(y,{label:"Total",value:e.jsxs("span",{className:"font-bold text-lg text-accent",children:["Rp ",t.totalAmount.toLocaleString("id-ID")]})})})]})]})]})]})]})})]})]})})},v=pe("https://be-neo-production.up.railway.app",{transports:["websocket"],withCredentials:!0}),z=a=>typeof a!="string"?"":a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=\s*["'][^"']*["']/gi,"").replace(/[<>]/g,"").trim().substring(0,100),ke=({status:a})=>{const t={"Telah Sampai":{bg:"bg-success/10",text:"text-success",ring:"ring-success/20",icon:D,glow:"shadow-success/25"},Diproses:{bg:"bg-warning/10",text:"text-warning",ring:"ring-warning/20",icon:Ne,glow:"shadow-warning/25"},Cancelled:{bg:"bg-error/10",text:"text-error",ring:"ring-error/20",icon:L,glow:"shadow-error/25"},Dikirim:{bg:"bg-info/10",text:"text-info",ring:"ring-info/20",icon:$,glow:"shadow-info/25"},"Pending Payment":{bg:"bg-muted/20",text:"text-muted-foreground",ring:"ring-muted/30",icon:ve,glow:"shadow-muted/25"}},r=t[a]||t["Pending Payment"],o=r.icon;return e.jsxs(i.span,{whileHover:{scale:1.05},className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-medium 
        ${r.bg} ${r.text} ring-1 ${r.ring} backdrop-blur-sm
        transition-all duration-320 hover:shadow-lg ${r.glow}`,children:[e.jsx(o,{className:"w-3 h-3"}),a]})},N=({icon:a,label:t,value:r,trend:o,color:d="accent"})=>e.jsx(i.div,{whileHover:{scale:1.02,y:-2},className:`glass-card p-6 group cursor-pointer transition-all duration-320\r
      hover:shadow-xl hover:shadow-accent/10`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-text-subtle text-sm font-medium",children:t}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:r}),o&&e.jsxs("p",{className:"text-xs text-success flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),o]})]}),e.jsx("div",{className:`p-3 rounded-xl bg-${d}/10 text-${d} 
        group-hover:bg-${d}/20 transition-all duration-320`,children:e.jsx(a,{className:"w-6 h-6"})})]})}),Se=({active:a,onClick:t,children:r,count:o})=>e.jsxs(i.button,{whileTap:{scale:.95},onClick:t,className:`relative px-4 py-2 rounded-xl text-sm font-medium transition-all duration-320
      ${a?"bg-secondary text-secondary-foreground shadow-lg shadow-secondary/25":"bg-muted/10 text-muted-foreground hover:bg-accent/10 hover:text-accent"} border border-border hover:border-accent/50`,children:[r,o>0&&e.jsx("span",{className:`absolute -top-2 -right-2 w-5 h-5 bg-accent text-accent-foreground \r
        text-xs rounded-full flex items-center justify-center font-bold`,children:o})]}),_e=()=>{const a=Y(),{toast:t}=Z(),{orders:r=[],selectedOrder:o,status:d}=ee(s=>s.admin)||{},[l,f]=c.useState(!1),[w,E]=c.useState(""),[b,H]=c.useState("All"),[P,B]=c.useState(!1),[p,U]=c.useState(window.innerWidth<768);c.useEffect(()=>{const s=()=>U(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),c.useEffect(()=>{a(A())},[a]),c.useEffect(()=>{const s=()=>a(A());return v.on("new-order",s),v.on("order-status-updated",s),()=>{v.off("new-order",s),v.off("order-status-updated",s)}},[a]);const _=c.useCallback(s=>{const m=z(s.target.value);E(m)},[]),u=c.useMemo(()=>{const s=r.length,m=r.filter(x=>x.status==="Pending Payment").length,n=r.filter(x=>x.status==="Diproses").length,W=r.filter(x=>x.status==="Dikirim").length,Q=r.filter(x=>x.status==="Telah Sampai").length,X=r.reduce((x,G)=>x+G.totalAmount,0);return{total:s,pending:m,processing:n,shipped:W,fulfilled:Q,revenue:X}},[r]),I=c.useMemo(()=>r.filter(s=>b==="All"||s.status===b).filter(s=>{const m=z(w);return s.orderId.toLowerCase().includes(m.toLowerCase())||s.user&&s.user.name.toLowerCase().includes(m.toLowerCase())}),[w,b,r]),C=async(s,m)=>{try{await a(m(s)).unwrap(),t({title:"Success",description:"Order status updated successfully",className:"bg-success/10 border-success/20"})}catch(n){t({variant:"destructive",title:"Failed",description:n.message,className:"bg-error/10 border-error/20"})}},O=s=>{a(te(s)),f(!0)},q=()=>{a(ae()),f(!1)},V=[{key:"All",label:"All Orders",count:u.total},{key:"Pending Payment",label:"Pending",count:u.pending},{key:"Diproses",label:"Processing",count:u.processing},{key:"Dikirim",label:"Shipped",count:u.shipped},{key:"Telah Sampai",label:"Fulfilled",count:u.fulfilled}];return e.jsxs("div",{className:"relative min-h-screen bg-background",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx(i.div,{animate:{x:[0,100,0],y:[0,-50,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0},className:"absolute -top-20 -left-20 w-96 h-96 bg-accent/5 rounded-full blur-3xl"}),e.jsx(i.div,{animate:{x:[0,-80,0],y:[0,60,0],scale:[1,.9,1]},transition:{duration:25,repeat:1/0},className:"absolute bottom-0 right-0 w-80 h-80 bg-secondary/8 rounded-full blur-3xl"}),e.jsx(i.div,{animate:{x:[0,50,0],y:[0,-30,0],scale:[1,1.2,1]},transition:{duration:30,repeat:1/0},className:"absolute top-1/2 left-1/3 w-64 h-64 bg-primary/6 rounded-full blur-3xl"})]}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-16",children:[e.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-4xl lg:text-5xl font-heading text-foreground mb-2 \r
                  bg-gradient-to-r from-foreground via-accent to-secondary bg-clip-text `,children:"Order Command"}),e.jsx("p",{className:"text-text-subtle text-lg",children:"Orchestrate transactions with precision & elegance"})]}),p&&e.jsxs(k,{onClick:()=>B(!P),variant:"outline",size:"sm",className:"bg-card/50 border-border hover:bg-accent/10",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Filters"]})]})}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(N,{icon:S,label:"Total Orders",value:u.total,color:"accent"}),e.jsx(N,{icon:be,label:"Processing",value:u.processing,color:"warning"}),e.jsx(N,{icon:fe,label:"Revenue",value:`Rp ${u.revenue.toLocaleString("id-ID")}`,trend:"+12.5%",color:"success"}),e.jsx(N,{icon:R,label:"Fulfilled",value:u.fulfilled,color:"secondary"})]}),e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"glass-card p-6 mb-8",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(je,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(se,{placeholder:"Search by Order ID or Customer Name",value:w,onChange:_,className:`pl-12 h-12 bg-card/50 border-border text-foreground \r
                  placeholder-muted-foreground rounded-xl backdrop-blur-sm\r
                  focus:ring-2 focus:ring-accent/50 focus:border-accent\r
                  transition-all duration-320`,maxLength:100})]}),e.jsx(M,{children:(!p||P)&&e.jsx(i.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-wrap gap-3",children:V.map(s=>e.jsx(Se,{active:b===s.key,onClick:()=>H(s.key),count:s.count,children:s.label},s.key))})})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"glass-card overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(oe,{children:[e.jsx(le,{children:e.jsxs(T,{className:"border-border hover:bg-transparent",children:[e.jsx(g,{className:"text-muted-foreground font-medium h-14",children:"Order ID"}),e.jsx(g,{className:"text-muted-foreground font-medium",children:"Customer"}),!p&&e.jsx(g,{className:"text-muted-foreground font-medium",children:"Date"}),e.jsx(g,{className:"text-muted-foreground font-medium",children:"Status"}),e.jsx(g,{className:"text-muted-foreground font-medium text-right",children:"Total"}),e.jsx(g,{className:"text-muted-foreground font-medium text-right",children:"Actions"})]})}),e.jsxs(ce,{children:[d==="loading"&&e.jsx(T,{children:e.jsx(h,{colSpan:p?5:6,className:"py-16 text-center",children:e.jsx(F,{})})}),d==="succeeded"&&I.map((s,m)=>e.jsxs(i.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:m*.05},whileHover:{backgroundColor:"hsl(var(--accent) / 0.05)",scale:1.001},className:"border-border hover:bg-accent/5 transition-all duration-320 cursor-pointer",onClick:()=>O(s._id),children:[e.jsx(h,{className:"font-mono text-sm text-accent",children:s.orderId}),e.jsx(h,{className:"font-medium text-foreground",children:s.user?.name||"â€”"}),!p&&e.jsx(h,{className:"text-text-subtle",children:new Date(s.createdAt).toLocaleDateString("id-ID")}),e.jsx(h,{children:e.jsx(ke,{status:s.status})}),e.jsxs(h,{className:"text-right font-semibold text-foreground",children:["Rp ",s.totalAmount.toLocaleString("id-ID")]}),e.jsx(h,{className:"text-right",children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:p?"sm":"default",className:`h-8 w-8 p-0 text-muted-foreground hover:text-foreground \r
                                hover:bg-accent/10 transition-all duration-320`,onClick:n=>n.stopPropagation(),children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsxs(xe,{align:"end",className:"glass-card border-border min-w-48",children:[e.jsxs(j,{onClick:n=>{n.stopPropagation(),O(s._id)},className:`text-foreground hover:bg-accent/10 hover:text-accent \r
                                transition-colors duration-320`,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"View Details"]}),s.status==="Pending Payment"&&e.jsxs(j,{onClick:n=>{n.stopPropagation(),C(s._id,re)},className:`text-warning hover:bg-warning/10 hover:text-warning \r
                                  transition-colors duration-320`,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Confirm Payment"]}),s.status==="Diproses"&&e.jsxs(j,{onClick:n=>{n.stopPropagation(),C(s._id,ie)},className:`text-info hover:bg-info/10 hover:text-info \r
                                  transition-colors duration-320`,children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Mark as Shipped"]}),s.status==="Dikirim"&&e.jsxs(j,{onClick:n=>{n.stopPropagation(),C(s._id,ne)},className:`text-success hover:bg-success/10 hover:text-success \r
                                  transition-colors duration-320`,children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Mark as Fulfilled"]})]})]})})]},s.orderId))]})]}),d==="succeeded"&&I.length===0&&e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16 text-muted-foreground",children:[e.jsx(S,{className:"w-16 h-16 mx-auto mb-4 text-muted/50"}),e.jsx("p",{className:"text-lg mb-2",children:"No orders found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or filter criteria"})]})]})})]})}),e.jsx(Ce,{isOpen:l,order:o,status:d,onClose:q})]})};export{_e as default};
