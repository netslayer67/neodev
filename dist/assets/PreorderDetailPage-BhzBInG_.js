const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductCard-BlsNr6fx.js","assets/index-prnh0kJO.js","assets/index-BnOa1r69.css","assets/clock-B6wggCtW.js","assets/heart-BxFP3jNI.js","assets/eye-GbwtL3Bc.js","assets/award-CCoPQd6g.js"])))=>i.map(i=>d[i]);
import{e as $,u as M,g as O,h as F,r as t,a as P,i as G,k as H,l as V,j as e,B as N,m as p,L as B,_ as S,b as T,A as E}from"./index-prnh0kJO.js";import{H as X}from"./Helmet-SIPCh4To.js";import{A as q,I as Q}from"./info-CQbAleUN.js";import{C as A}from"./clock-B6wggCtW.js";import{T as U}from"./truck-DyDmy6Es.js";import{A as K}from"./award-CCoPQd6g.js";import{M as Y,P as Z}from"./plus-CY1B7mqH.js";import{L as J}from"./lock-DmiWr7Xs.js";import"./index-BBHzotsr.js";const W=t.lazy(()=>S(()=>import("./ProductCard-BlsNr6fx.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),ee=t.lazy(()=>S(()=>import("./index-prnh0kJO.js").then(s=>s.aN),__vite__mapDeps([1,2]))),te=80,I=120,se=4,C=100,b=new Map,re=100,ae=(s="",n=I)=>{const r=`${s}-${n}`;if(b.has(r))return b.get(r);const o=String(s).slice(0,n).replace(/<[^>]*>?/g,"").replace(/https?:\/\//gi,"").replace(/mailto:/gi,"").replace(/[<>"]|'`\\/g,"").trim();if(b.size>=re){const i=b.keys().next().value;b.delete(i)}return b.set(r,o),o},k=t.memo(({src:s,alt:n,className:r,onLoad:o,priority:i=!1,sizes:x="100vw"})=>{const[l,c]=t.useState(!1),[a,f]=t.useState(!1),v=t.useRef(null),j=t.useCallback(()=>{c(!0),o?.()},[o]),h=t.useCallback(()=>{f(!0),c(!0)},[]);return e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{ref:v,src:s,alt:n,className:`${r} transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,onLoad:j,onError:h,loading:i?"eager":"lazy",decoding:"async",draggable:!1,sizes:x}),!l&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/30 border-t-accent rounded-full animate-spin"})}),a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/10 text-muted-foreground text-sm",children:"Failed to load image"})]})}),_=t.memo(({images:s,productName:n})=>{const[r,o]=t.useState(0),[i,x]=t.useState(0),[l,c]=t.useState(0),[a,f]=t.useState(!1),[v,j]=t.useState(0),h=t.useRef(null),y=T(),u=t.useCallback(m=>{x(m.touches[0].clientX),f(!0)},[]),D=t.useCallback(m=>{a&&(h.current&&cancelAnimationFrame(h.current),h.current=requestAnimationFrame(()=>{const d=m.touches[0].clientX,g=d-i;j(g),c(d)}))},[a,i]),L=t.useCallback(()=>{if(!a)return;const m=i-l;Math.abs(m)>te&&(m>0&&r<s.length-1?t.startTransition(()=>{o(g=>g+1)}):m<0&&r>0&&t.startTransition(()=>{o(g=>g-1)})),f(!1),j(0),c(0)},[a,i,l,r,s.length]);return t.useEffect(()=>()=>{h.current&&cancelAnimationFrame(h.current)},[]),t.useEffect(()=>{const m=d=>{const g=new Image;g.src=d};s[r+1]&&setTimeout(()=>m(s[r+1].url),C),s[r-1]&&setTimeout(()=>m(s[r-1].url),C)},[r,s]),s?.length?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"glass-card rounded-2xl overflow-hidden shadow-xl",children:e.jsxs("div",{className:"relative w-full h-[520px] md:h-[640px] max-h-[75vh] overflow-hidden",onTouchStart:u,onTouchMove:D,onTouchEnd:L,children:[e.jsx(E,{mode:"wait",children:e.jsx(p.div,{initial:y?{}:{opacity:0,x:20},animate:{opacity:1,x:0},exit:y?{}:{opacity:0,x:-20},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0",style:{transform:a?`translateX(${v}px)`:void 0},children:e.jsx(k,{src:s[r]?.url,alt:`${n} - Image ${r+1}`,className:"object-contain w-full h-full",priority:r===0,sizes:"(max-width: 768px) 100vw, 50vw"})},r)}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-warning to-accent text-white shadow-lg",children:"PREORDER EXCLUSIVE"})}),s.length>1&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-4 flex gap-2",children:s.map((m,d)=>e.jsx("button",{onClick:()=>t.startTransition(()=>o(d)),"aria-label":`Go to image ${d+1}`,className:`w-2 h-2 rounded-full transition-all duration-300 ${d===r?"bg-warning scale-125":"bg-foreground/20 hover:bg-foreground/60"}`},d))})]})}),s.length>1&&e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide py-2",children:s.map((m,d)=>e.jsx("button",{onClick:()=>t.startTransition(()=>o(d)),className:`w-20 h-20 rounded-xl border transition-all duration-300 overflow-hidden flex-shrink-0 ${r===d?"border-warning scale-105 shadow-lg":"border-border hover:border-muted-foreground"}`,children:e.jsx(k,{src:m.url,alt:`${n} thumbnail ${d+1}`,className:"object-cover w-full h-full",sizes:"80px"})},d))})]}):null}),w=t.memo(({title:s,icon:n,children:r,defaultOpen:o=!1})=>{const[i,x]=t.useState(o),l=T(),c=t.useCallback(()=>{t.startTransition(()=>{x(a=>!a)})},[]);return e.jsxs("div",{className:"border-b border-border",children:[e.jsxs("button",{onClick:c,className:"w-full flex justify-between items-center py-4 text-foreground hover:text-secondary transition-colors duration-300","aria-expanded":i,children:[e.jsxs("span",{className:"flex items-center gap-2 text-base font-semibold",children:[n&&e.jsx(n,{size:16,className:"text-accent"}),s]}),e.jsx(p.span,{animate:{rotate:i?45:0},transition:{duration:l?.1:.2},className:"text-muted-foreground text-xl",children:"+"})]}),e.jsx(E,{children:i&&e.jsx(p.div,{initial:l?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:l?{opacity:0}:{opacity:0,height:0},transition:{duration:l?.1:.3,ease:"easeOut"},className:"text-sm text-muted-foreground pb-4 overflow-hidden",children:r})})]})}),z=t.memo(({product:s,quantity:n,selectedSize:r,onQuantityChange:o,onSizeChange:i,onAddToCart:x})=>{t.useMemo(()=>s?.sizes?.find(c=>c.size===r)?.quantity||0,[s?.sizes,r]);const l=r;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"w-4 h-4 text-warning"}),e.jsx("span",{className:"text-xs font-semibold text-warning uppercase tracking-wider",children:"Preorder Exclusive"})]}),e.jsx("p",{className:"uppercase text-xs tracking-widest text-secondary mb-1 font-semibold",children:s.category}),e.jsx("h1",{className:"text-3xl lg:text-5xl font-heading font-bold leading-tight",children:s.name}),e.jsxs("p",{className:"text-xl font-semibold mt-2",children:["Rp ",s.price?.toLocaleString("id-ID")]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-warning",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"Limited preorder pricing - VA payment only"})]})]}),e.jsxs("div",{className:"glass-card p-6 flex flex-col gap-5 shadow-lg border-warning/20",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s?.sizes?.map(({size:c,quantity:a})=>e.jsx("button",{onClick:()=>i(c),className:`px-4 py-2 text-sm font-medium rounded-full border transition-all duration-300 ${r===c?"bg-warning text-warning-foreground border-warning scale-105":"bg-card text-foreground border-border hover:bg-muted hover:scale-105"}`,"aria-pressed":r===c,"aria-label":`Size ${c}`,children:c},c))}),r&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Preorder available for size ",r]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-3 border border-border rounded-full px-3 py-1 bg-background/60",children:[e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>o(Math.max(1,n-1)),disabled:n<=1,children:e.jsx(Y,{size:16})}),e.jsx("span",{className:"font-semibold w-6 text-center",children:n}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>o(Math.min(10,n+1)),disabled:n>=10,children:e.jsx(Z,{size:16})})]})]}),e.jsxs(N,{onClick:x,disabled:!l,className:`w-full py-3 font-bold rounded-full transition-all duration-300 flex items-center justify-center gap-2 ${l?"bg-gradient-to-r from-warning to-accent hover:opacity-90 hover:scale-105 active:scale-95 text-white":"bg-muted text-muted-foreground cursor-not-allowed"}`,children:[e.jsx(J,{size:18}),r?"Add to Preorder Cart":"Pilih Size"]}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:[e.jsx("p",{children:"âš¡ Secure preorder â€¢ VA payment required"}),e.jsx("p",{children:"ðŸ“… Estimated delivery: 4-6 weeks after production"})]})]})]})}),R=t.memo(({products:s,currentProductId:n,category:r})=>{const o=t.useMemo(()=>s?.filter(i=>i.category===r&&i._id!==n)?.slice(0,se)||[],[s,r,n]);return o.length===0?null:e.jsxs("div",{className:"mt-24",children:[e.jsx(p.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-2xl font-heading font-semibold text-center mb-10",children:"More Preorder Items"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-8",children:o.map((i,x)=>e.jsx(p.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:x*.1,duration:.5},children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"aspect-[4/5] bg-muted/20 rounded-2xl animate-pulse"}),children:e.jsx(W,{product:i,isPreorder:!0})})},i._id))})]})}),ne=()=>{const{slug:s}=$(),n=M(),r=O(),{toast:o}=F(),[i,x]=t.useState(1),[l,c]=t.useState(null),a=P(u=>u.products?.selectedProduct),f=P(u=>u.products?.status),v=P(u=>u.products?.items||[]);t.useEffect(()=>{if(s){const u=ae(s,I);n(G(u))}return()=>{n(H())}},[s,n]),t.useEffect(()=>{a&&(x(1),c(a?.sizes?.[0]?.size||null))},[a?._id]);const j=t.useCallback(()=>{if(!a||!l){o({title:"Pilih size terlebih dahulu",description:"Pilih ukuran sebelum menambahkan ke keranjang preorder.",variant:"destructive"});return}n(V({product:{...a,size:l,isPreorder:!0},quantity:i})),o({title:"Berhasil ditambahkan ke preorder",description:`${i} Ã— ${a.name} (Size ${l}) - Preorder`,className:"glass-card"})},[a,l,i,n,o]),h=t.useCallback(u=>{t.startTransition(()=>{x(u)})},[]),y=t.useCallback(u=>{t.startTransition(()=>{c(u)})},[]);return f==="loading"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"min-h-screen bg-background"}),children:e.jsx(ee,{})}):f==="failed"||!a?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-foreground",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Preorder Item Not Found"}),e.jsx(N,{onClick:()=>r("/preorder"),variant:"outline",children:"Back to Preorder Collection"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsxs("title",{children:[a.name," â€” Preorder | Neo Dervish"]}),e.jsx("meta",{name:"description",content:`Preorder ${a.description?.slice(0,150)||"Exclusive preorder collection"}`}),e.jsx("meta",{property:"og:title",content:`${a.name} â€” Preorder | Neo Dervish`}),e.jsx("meta",{property:"og:description",content:a.description}),e.jsx("meta",{property:"og:image",content:a.images?.[0]?.url}),e.jsx("link",{rel:"preload",href:a.images?.[0]?.url,as:"image"})]}),e.jsxs("div",{className:"min-h-screen pt-20 pb-32 font-sans relative text-foreground overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -left-40 w-96 h-96 bg-warning/15 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-accent/8 rounded-full blur-3xl animate-pulse"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsx(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsxs(B,{to:"/preorder",className:"flex items-center mb-6 text-sm text-muted-foreground hover:text-foreground transition-colors duration-300",children:[e.jsx(q,{className:"mr-2",size:16}),"Back to Preorder Collection"]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsx(p.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:e.jsx(_,{images:a.images,productName:a.name})}),e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[e.jsx(z,{product:a,quantity:i,selectedSize:l,onQuantityChange:h,onSizeChange:y,onAddToCart:j}),e.jsxs("div",{className:"mt-8 divide-y divide-border",children:[e.jsx(w,{title:"Description",icon:Q,defaultOpen:!0,children:e.jsx("p",{className:"leading-relaxed",children:a.description})}),e.jsx(w,{title:"Preorder Details",icon:A,children:e.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"VA Payment Only:"})," Preorders require Virtual Account payment"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Production Time:"})," 2-3 weeks after preorder closes"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Shipping:"})," 1-2 weeks after production completion"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Total Delivery:"})," Approximately 4-6 weeks"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Refund Policy:"})," Non-refundable once production begins"]})]})}),e.jsx(w,{title:"Shipping & Returns",icon:U,children:e.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[e.jsx("p",{children:"â€¢ Fast delivery within 2-3 business days after production"}),e.jsx("p",{children:"â€¢ Free shipping on all preorder items"}),e.jsx("p",{children:"â€¢ Preorder items are final sale"})]})})]})]})]}),e.jsx(R,{products:v,currentProductId:a._id,category:a.category})]})]})]})};k.displayName="OptimizedImage";_.displayName="ImageGallery";w.displayName="AccordionItem";z.displayName="ProductInfo";R.displayName="RelatedProducts";ne.displayName="PreorderDetailPage";export{ne as default};
