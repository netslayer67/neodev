const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductCard-BiAOFLCV.js","assets/index-DZQ2CCKA.js","assets/index-CnsjXSBg.css","assets/heart-C4oJLDX2.js","assets/eye-D06uxCy4.js"])))=>i.map(i=>d[i]);
import{e as P,g as L,u as O,h as F,i as H,r as t,a as S,k as B,l as G,n as X,j as e,B as k,m as g,L as Q,_ as E,b as I,A as _,o as K}from"./index-DZQ2CCKA.js";import{H as U}from"./Helmet-C13ebPFL.js";import{T as V}from"./truck-CV13bfjW.js";import{M as Y,P as J}from"./plus-sXekqdvs.js";import"./index-Ds9c_sIv.js";const Z=P("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),C=P("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),q=t.lazy(()=>E(()=>import("./ProductCard-BiAOFLCV.js"),__vite__mapDeps([0,1,2,3,4]))),W=t.lazy(()=>E(()=>import("./index-DZQ2CCKA.js").then(a=>a.aM),__vite__mapDeps([1,2]))),ee=80,M=120,te=4,z=100,y=new Map,se=100,ae=(a="",o=M)=>{const i=`${a}-${o}`;if(y.has(i))return y.get(i);const l=String(a).slice(0,o).replace(/<[^>]*>?/g,"").replace(/https?:\/\//gi,"").replace(/mailto:/gi,"").replace(/[<>"]|'`\\/g,"").trim();if(y.size>=se){const n=y.keys().next().value;y.delete(n)}return y.set(i,l),l},T=t.memo(({src:a,alt:o,className:i,onLoad:l,priority:n=!1,sizes:m="100vw"})=>{const[r,h]=t.useState(!1),[s,d]=t.useState(!1),f=t.useRef(null),b=t.useCallback(()=>{h(!0),l?.()},[l]),p=t.useCallback(()=>{d(!0),h(!0)},[]);return e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{ref:f,src:a,alt:o,className:`${i} transition-opacity duration-300 ${r?"opacity-100":"opacity-0"}`,onLoad:b,onError:p,loading:n?"eager":"lazy",decoding:"async",draggable:!1,sizes:m}),!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/30 border-t-accent rounded-full animate-spin"})}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/10 text-muted-foreground text-sm",children:"Failed to load image"})]})}),A=t.memo(({images:a,productName:o})=>{const[i,l]=t.useState(0),[n,m]=t.useState(0),[r,h]=t.useState(0),[s,d]=t.useState(!1),[f,b]=t.useState(0),p=t.useRef(null),N=I(),c=t.useCallback(x=>{m(x.touches[0].clientX),d(!0)},[]),v=t.useCallback(x=>{s&&(p.current&&cancelAnimationFrame(p.current),p.current=requestAnimationFrame(()=>{const u=x.touches[0].clientX,j=u-n;b(j),h(u)}))},[s,n]),D=t.useCallback(()=>{if(!s)return;const x=n-r;Math.abs(x)>ee&&(x>0&&i<a.length-1?t.startTransition(()=>{l(j=>j+1)}):x<0&&i>0&&t.startTransition(()=>{l(j=>j-1)})),d(!1),b(0),h(0)},[s,n,r,i,a.length]);return t.useEffect(()=>()=>{p.current&&cancelAnimationFrame(p.current)},[]),t.useEffect(()=>{const x=u=>{const j=new Image;j.src=u};a[i+1]&&setTimeout(()=>x(a[i+1].url),z),a[i-1]&&setTimeout(()=>x(a[i-1].url),z)},[i,a]),a?.length?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"glass-card rounded-2xl overflow-hidden shadow-xl",children:e.jsxs("div",{className:"relative w-full h-[520px] md:h-[640px] max-h-[75vh] overflow-hidden",onTouchStart:c,onTouchMove:v,onTouchEnd:D,children:[e.jsx(_,{mode:"wait",children:e.jsx(g.div,{initial:N?{}:{opacity:0,x:20},animate:{opacity:1,x:0},exit:N?{}:{opacity:0,x:-20},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0",style:{transform:s?`translateX(${f}px)`:void 0},children:e.jsx(T,{src:a[i]?.url,alt:`${o} - Image ${i+1}`,className:"object-contain w-full h-full",priority:i===0,sizes:"(max-width: 768px) 100vw, 50vw"})},i)}),a.length>1&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-4 flex gap-2",children:a.map((x,u)=>e.jsx("button",{onClick:()=>t.startTransition(()=>l(u)),"aria-label":`Go to image ${u+1}`,className:`w-2 h-2 rounded-full transition-all duration-300 ${u===i?"bg-accent scale-125":"bg-foreground/20 hover:bg-foreground/60"}`},u))})]})}),a.length>1&&e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide py-2",children:a.map((x,u)=>e.jsx("button",{onClick:()=>t.startTransition(()=>l(u)),className:`w-20 h-20 rounded-xl border transition-all duration-300 overflow-hidden flex-shrink-0 ${i===u?"border-accent scale-105 shadow-lg":"border-border hover:border-muted-foreground"}`,children:e.jsx(T,{src:x.url,alt:`${o} thumbnail ${u+1}`,className:"object-cover w-full h-full",sizes:"80px"})},u))})]}):null}),w=t.memo(({title:a,icon:o,children:i,defaultOpen:l=!1})=>{const[n,m]=t.useState(l),r=I(),h=t.useCallback(()=>{t.startTransition(()=>{m(s=>!s)})},[]);return e.jsxs("div",{className:"border-b border-border",children:[e.jsxs("button",{onClick:h,className:"w-full flex justify-between items-center py-4 text-foreground hover:text-secondary transition-colors duration-300","aria-expanded":n,children:[e.jsxs("span",{className:"flex items-center gap-2 text-base font-semibold",children:[o&&e.jsx(o,{size:16,className:"text-accent"}),a]}),e.jsx(g.span,{animate:{rotate:n?45:0},transition:{duration:r?.1:.2},className:"text-muted-foreground text-xl",children:"+"})]}),e.jsx(_,{children:n&&e.jsx(g.div,{initial:r?{opacity:1}:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:r?{opacity:0}:{opacity:0,height:0},transition:{duration:r?.1:.3,ease:"easeOut"},className:"text-sm text-muted-foreground pb-4 overflow-hidden",children:i})})]})}),$=t.memo(({product:a,quantity:o,selectedSize:i,onQuantityChange:l,onSizeChange:n,onAddToCart:m})=>{const r=t.useMemo(()=>a?.sizes?.find(d=>d.size===i)?.quantity||0,[a?.sizes,i]),h=i&&r===0,s=i&&!h;return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"uppercase text-xs tracking-widest text-secondary mb-1 font-semibold",children:a.category}),e.jsx("h1",{className:"text-3xl lg:text-5xl font-heading font-bold leading-tight",children:a.name}),e.jsxs("p",{className:"text-xl font-semibold mt-2",children:["Rp ",a.price?.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"glass-card p-6 flex flex-col gap-5 shadow-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Size"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a?.sizes?.map(({size:d,quantity:f})=>e.jsx("button",{disabled:f===0,onClick:()=>n(d),className:`px-4 py-2 text-sm font-medium rounded-full border transition-all duration-300 ${i===d?"bg-secondary text-secondary-foreground border-secondary scale-105":f===0?"bg-muted text-muted-foreground border-border cursor-not-allowed opacity-50":"bg-card text-foreground border-border hover:bg-muted hover:scale-105"}`,"aria-pressed":i===d,"aria-label":`Size ${d}${f===0?" - Out of stock":""}`,children:d},d))}),i&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Stock: ",r," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-3 border border-border rounded-full px-3 py-1 bg-background/60",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>l(Math.max(1,o-1)),disabled:o<=1,children:e.jsx(Y,{size:16})}),e.jsx("span",{className:"font-semibold w-6 text-center",children:o}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>l(Math.min(o+1,r)),disabled:o>=r,children:e.jsx(J,{size:16})})]})]}),e.jsxs(k,{onClick:m,disabled:!s,className:`w-full py-3 font-bold rounded-full transition-all duration-300 flex items-center justify-center gap-2 ${s?"btn-primary hover:opacity-90 hover:scale-105 active:scale-95":"bg-muted text-muted-foreground cursor-not-allowed"}`,children:[e.jsx(K,{size:20}),i?h?"Habis":"Tambahkan ke Keranjang":"Pilih Size"]})]})]})}),R=t.memo(({products:a,currentProductId:o,category:i})=>{const l=t.useMemo(()=>a?.filter(n=>n.category===i&&n._id!==o)?.slice(0,te)||[],[a,i,o]);return l.length===0?null:e.jsxs("div",{className:"mt-24",children:[e.jsx(g.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-2xl font-heading font-semibold text-center mb-10",children:"You Might Also Like"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map((n,m)=>e.jsx(g.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:m*.1,duration:.5},children:e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"aspect-[4/5] bg-muted/20 rounded-2xl animate-pulse"}),children:e.jsx(q,{product:n})})},n._id))})]})}),ie=()=>{const{slug:a}=L(),o=O(),i=F(),{toast:l}=H(),[n,m]=t.useState(1),[r,h]=t.useState(null),s=S(c=>c.products?.selectedProduct),d=S(c=>c.products?.status),f=S(c=>c.products?.items||[]);t.useEffect(()=>{if(a){const c=ae(a,M);o(B(c))}return()=>{o(G())}},[a,o]),t.useEffect(()=>{s&&(m(1),h(s?.sizes?.[0]?.size||null))},[s?._id]),t.useEffect(()=>{if(!s||!r)return;const c=s.sizes.find(v=>v.size===r)?.quantity??0;n>c&&m(Math.max(1,c))},[r,s,n]);const b=t.useCallback(()=>{if(!s||!r){l({title:"Pilih size terlebih dahulu",description:"Pilih ukuran sebelum menambahkan ke keranjang.",variant:"destructive"});return}const c=s.sizes.find(v=>v.size===r)?.quantity??0;if(n<1||n>c){l({title:"Jumlah tidak valid",description:`Stok untuk size ${r}: ${c}`,variant:"destructive"});return}o(X({product:{...s,size:r},quantity:n})),l({title:"Berhasil ditambahkan",description:`${n} × ${s.name} (Size ${r})`,className:"glass-card"})},[s,r,n,o,l]),p=t.useCallback(c=>{t.startTransition(()=>{m(c)})},[]),N=t.useCallback(c=>{t.startTransition(()=>{h(c)})},[]);return d==="loading"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"min-h-screen bg-background"}),children:e.jsx(W,{})}):d==="failed"||!s?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-foreground",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Product Not Found"}),e.jsx(k,{onClick:()=>i("/shop"),variant:"outline",children:"Back to Shop"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsxs("title",{children:[s.name," — Neo Dervish"]}),e.jsx("meta",{name:"description",content:s.description?.slice(0,150)||"Premium streetwear collection"}),e.jsx("meta",{property:"og:title",content:`${s.name} — Neo Dervish`}),e.jsx("meta",{property:"og:description",content:s.description}),e.jsx("meta",{property:"og:image",content:s.images?.[0]?.url}),e.jsx("link",{rel:"preload",href:s.images?.[0]?.url,as:"image"})]}),e.jsxs("div",{className:"min-h-screen pt-20 pb-32 font-sans relative text-foreground overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -left-40 w-96 h-96 bg-accent/15 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-secondary/8 rounded-full blur-3xl animate-pulse"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsx(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsxs(Q,{to:"/shop",className:"flex items-center mb-6 text-sm text-muted-foreground hover:text-foreground transition-colors duration-300",children:[e.jsx(Z,{className:"mr-2",size:16}),"Back to Collection"]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsx(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},children:e.jsx(A,{images:s.images,productName:s.name})}),e.jsxs(g.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},children:[e.jsx($,{product:s,quantity:n,selectedSize:r,onQuantityChange:p,onSizeChange:N,onAddToCart:b}),e.jsxs("div",{className:"mt-8 divide-y divide-border",children:[e.jsx(w,{title:"Description",icon:C,defaultOpen:!0,children:e.jsx("p",{className:"leading-relaxed",children:s.description})}),e.jsx(w,{title:"Details & Fit",icon:C,children:e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[e.jsxs("li",{children:["Material: ",s.details?.material||"Premium Cotton"]}),e.jsxs("li",{children:["Fit: ",s.details?.fit||"Regular"]}),e.jsxs("li",{children:["Origin: ",s.details?.origin||"In-house"]}),e.jsxs("li",{children:["Care: ",s.details?.care||"Machine wash cold"]})]})}),e.jsx(w,{title:"Shipping & Returns",icon:V,children:e.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[e.jsx("p",{children:"• Fast delivery within 2-3 business days"}),e.jsx("p",{children:"• Easy returns within 7 days of purchase"}),e.jsx("p",{children:"• Free shipping on orders over Rp 500,000"})]})})]})]})]}),e.jsx(R,{products:f,currentProductId:s._id,category:s.category})]})]})]})};T.displayName="OptimizedImage";A.displayName="ImageGallery";w.displayName="AccordionItem";$.displayName="ProductInfo";R.displayName="RelatedProducts";ie.displayName="ProductDetailPage";export{ie as default};
