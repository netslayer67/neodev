import{r as t,b as A,j as e,m as g,L as E,A as z}from"./index-prnh0kJO.js";import{C}from"./clock-B6wggCtW.js";import{H as L}from"./heart-BxFP3jNI.js";import{E as S}from"./eye-GbwtL3Bc.js";import{A as O}from"./award-CCoPQd6g.js";const F=5e3,j=6,T=.32,f="animate-pulse bg-gradient-to-r from-muted/20 via-muted/40 to-muted/20",V=t.memo(()=>e.jsx("span",{className:"absolute top-2 left-2 z-20 rounded-full border border-border/40 bg-card/60 px-2 py-0.5 text-[10px] font-medium text-foreground backdrop-blur-md shadow-sm",children:"Fresh Drop"})),B=t.memo(()=>e.jsxs("span",{className:"absolute top-2 left-2 z-20 rounded-full border border-warning/40 bg-gradient-to-r from-warning/20 to-accent/20 px-2 py-0.5 text-[10px] font-medium text-warning backdrop-blur-md shadow-sm",children:[e.jsx(C,{size:8,className:"inline mr-1"}),"PREORDER"]})),D=t.memo(()=>e.jsxs("div",{className:"absolute top-2 right-2 z-30 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-320",children:[e.jsx("button",{className:"rounded-full border border-border bg-card/70 p-2 text-foreground backdrop-blur-md hover:bg-accent/30 transition-colors duration-320","aria-label":"Wishlist",children:e.jsx(L,{size:14})}),e.jsx("button",{className:"rounded-full border border-border bg-card/70 p-2 text-foreground backdrop-blur-md hover:bg-accent/30 transition-colors duration-320","aria-label":"Quick View",children:e.jsx(S,{size:14})})]})),Y=t.memo(()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden rounded-t-2xl",children:[e.jsx("div",{className:`w-full h-full ${f}`}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/95 via-background/40 to-transparent z-10"})]}),e.jsxs("div",{className:"relative z-20 space-y-2 p-4",children:[e.jsx("div",{className:`h-4 w-3/4 rounded-md ${f}`}),e.jsx("div",{className:`h-3 w-1/2 rounded-md ${f}`}),e.jsx("div",{className:"mt-3 flex items-center justify-between",children:e.jsx("div",{className:`h-4 w-1/3 rounded-md ${f}`})})]})]})),X=t.memo(({images:r,currentImage:a,productName:u})=>{const[s,i]=t.useState(!1),[o,l]=t.useState(!1),d=r?.[a],b=d?.url||"https://via.placeholder.com/400x533/1a1a2e/ffffff?text=No+Image";return e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden rounded-t-2xl bg-muted/20",children:[e.jsx(z,{mode:"wait",children:e.jsx(g.img,{src:b,alt:d?.alt||u||"Product",loading:"lazy",decoding:"async",onLoad:()=>i(!0),onError:()=>{l(!0),i(!0)},initial:{opacity:0},animate:{opacity:s?1:0},exit:{opacity:0},transition:{duration:.4,ease:"easeOut"},className:`absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-102 ${o?"object-contain bg-muted/10":""}`,style:{willChange:"transform"}},`${d?.url}-${a}`)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 via-background/20 to-transparent z-10"}),!s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/10",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent/30 border-t-accent rounded-full animate-spin"})})]})}),H=t.memo(({product:r,isPreorder:a=!1})=>e.jsxs("div",{className:"relative z-20 space-y-1 p-4",children:[e.jsx("h3",{className:`font-heading text-base sm:text-lg line-clamp-2 transition-colors duration-320 ${a?"group-hover:text-warning":"group-hover:text-accent"}`,children:r.name}),e.jsx("p",{className:"text-xs font-sans text-muted-foreground",children:r.category}),e.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[e.jsxs("span",{className:`text-sm font-semibold ${a?"text-warning":"text-accent"}`,children:["Rp ",r.price?.toLocaleString("id-ID")||"0"]}),a&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-warning font-medium",children:[e.jsx(O,{size:10}),e.jsx("span",{children:"VA Only"})]})]})]})),U=t.memo(({product:r,loading:a=!1,index:u=null,isPreorder:s=!1})=>{const i=t.useRef(null),o=t.useRef(null),l=t.useRef(null),[d,b]=t.useState(0),[h,x]=t.useState(!1),n=A(),p=typeof window<"u"&&window.innerWidth<768,v=t.useMemo(()=>r?.images?.length>1,[r?.images?.length]),N=t.useMemo(()=>!a&&u===0&&!s,[a,u,s]),y=t.useMemo(()=>!a&&s,[a,s]);t.useEffect(()=>{if(!(!v||a||n))return l.current=setInterval(()=>b(m=>(m+1)%r.images.length),F),()=>clearInterval(l.current)},[v,a,r?.images?.length,n]);const I=t.useCallback(m=>{p||n||!h||(o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{const c=i.current.getBoundingClientRect(),M=(m.clientY-c.top-c.height/2)/c.height*j,$=(m.clientX-c.left-c.width/2)/c.width*-j;i.current.style.transform=`perspective(1000px) rotateX(${M}deg) rotateY(${$}deg)`}))},[h,p,n]),k=t.useCallback(()=>x(!0),[]),R=t.useCallback(()=>{x(!1),o.current&&cancelAnimationFrame(o.current),i.current&&!n&&(i.current.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg)")},[n]);t.useEffect(()=>()=>{o.current&&cancelAnimationFrame(o.current),l.current&&clearInterval(l.current)},[]);const w=t.useMemo(()=>({hidden:{opacity:0,y:n?0:20},visible:{opacity:1,y:0,transition:{duration:n?.1:T,ease:"easeOut"}}}),[n]);return a?e.jsx(g.div,{variants:w,initial:"hidden",animate:"visible",className:"group relative w-full overflow-hidden rounded-2xl border border-border/30 bg-card/40 backdrop-blur-md shadow-md",children:e.jsx(Y,{})}):!r||!r.slug?null:e.jsx(g.div,{ref:i,variants:w,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"100px"},onMouseMove:I,onMouseEnter:k,onMouseLeave:R,className:"group relative w-full transition-all duration-320 will-change-transform",style:{transformStyle:"preserve-3d",backfaceVisibility:"hidden"},children:e.jsxs(E,{to:s?`/preorder/${r.slug}`:`/product/${r.slug}`,className:`block overflow-hidden rounded-2xl border border-border/50 backdrop-blur-xl shadow-lg transition-all duration-320 hover:shadow-xl focus:outline-none focus:ring-2 ${s?"bg-gradient-to-br from-card/60 to-warning/5 hover:shadow-warning/5 hover:border-warning/40 focus:ring-warning/50":"bg-card/60 hover:shadow-accent/5 hover:border-accent/40 focus:ring-accent/50"}`,"aria-label":`View details for ${r.name}`,children:[!n&&e.jsx(g.div,{className:`absolute -top-8 -right-8 w-24 h-24 rounded-full blur-2xl opacity-0 group-hover:opacity-60 transition-opacity duration-320 ${s?"bg-warning/10":"bg-accent/10"}`,animate:{scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),e.jsx(X,{images:r.images,currentImage:d,productName:r.name}),N&&e.jsx(V,{}),y&&e.jsx(B,{}),e.jsx(D,{}),e.jsx(H,{product:r,isPreorder:s})]})})});U.displayName="ProductCard";export{U as default};
